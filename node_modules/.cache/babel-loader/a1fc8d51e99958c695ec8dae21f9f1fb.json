{"ast":null,"code":"import _objectSpread from\"/Users/raymondjones/Git/styledrekond/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raymondjones/Git/styledrekond/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Calendar}from\"primereact/calendar\";import{Dropdown}from'primereact/dropdown';import{useDispatch,useSelector}from\"react-redux\";import{addNewBooking,getBookings}from\"../ducks/bookings\";import{getUsername}from\"../ducks/session\";import{Button}from\"primereact/button\";import{push}from\"connected-react-router\";import{confirmPopup}from'primereact/confirmpopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Booking(){var _useState=useState({date:undefined,hour:undefined}),_useState2=_slicedToArray(_useState,2),booking=_useState2[0],setBooking=_useState2[1];var allBookings=useSelector(getBookings);var hourSelectItems=[{label:'9:00',value:'09'},{label:'10:00',value:'10'},{label:'11:00',value:'11'},{label:'12:00',value:'12'},{label:'13:00',value:'13'},{label:'14:00',value:'14'},{label:'15:00',value:'15'},{label:'16:00',value:'16'}];var username=useSelector(getUsername);var dispatch=useDispatch();function availableHours(){return hourSelectItems.filter(function(hour){return!allBookings.filter(function(book){return book.date===booking.date;}).map(function(booking){return booking.hour;}).includes(hour.value);});}var confirm=function confirm(event){confirmPopup({target:event.currentTarget,message:\"Vill du boka datum \".concat(booking.date,\" vid klockan \").concat(booking.hour,\" ?\"),type:\"submit\",acceptLabel:\"Ja\",rejectLabel:\"Nej\",accept:function accept(){return handleBooking();},reject:function reject(){return null;}});};function handleBooking(){dispatch(addNewBooking(_objectSpread(_objectSpread({},booking),{},{username:username,id:createUUid()})));dispatch(push(\"/\"));}function createUUid(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==='x'?r:r&0x3|0x8;return v.toString(16);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bookingBody\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"bookingH3\",children:\"Boka tid\"}),/*#__PURE__*/_jsx(Calendar,{locale:\"sv\",dateFormat:\"dd-mm-yy\",inline:true,value:booking.date,disabledDays:[6,0],onChange:function onChange(e){setBooking(_objectSpread(_objectSpread({},booking),{},{date:e.value.toLocaleDateString(\"sv\")}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Dropdown,{className:\"bookingDropdown\",value:booking.hour,options:availableHours(),onChange:function onChange(e){return setBooking(_objectSpread(_objectSpread({},booking),{},{hour:e.target.value}));},placeholder:\"V\\xE4lj tidpunkt\",disabled:booking.date===undefined}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:confirm,label:\"Boka\",disabled:booking.date===undefined&&booking.hour===undefined})]});}export default Booking;","map":{"version":3,"sources":["/Users/raymondjones/Git/styledrekond/src/components/Booking.js"],"names":["React","useState","Calendar","Dropdown","useDispatch","useSelector","addNewBooking","getBookings","getUsername","Button","push","confirmPopup","Booking","date","undefined","hour","booking","setBooking","allBookings","hourSelectItems","label","value","username","dispatch","availableHours","filter","book","map","includes","confirm","event","target","currentTarget","message","type","acceptLabel","rejectLabel","accept","handleBooking","reject","id","createUUid","replace","c","r","Math","random","v","toString","e","toLocaleDateString"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {Calendar} from \"primereact/calendar\";\nimport { Dropdown } from 'primereact/dropdown';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {addNewBooking, getBookings} from \"../ducks/bookings\";\nimport {getUsername} from \"../ducks/session\";\nimport {Button} from \"primereact/button\";\nimport {push} from \"connected-react-router\";\nimport {confirmPopup} from 'primereact/confirmpopup';\n\n\n\n\nfunction Booking() {\n    const [booking, setBooking] = useState({date:undefined, hour: undefined});\n    const allBookings = useSelector(getBookings);\n    const hourSelectItems = [\n        {label: '9:00', value: '09'},\n        {label: '10:00', value: '10'},\n        {label: '11:00', value: '11'},\n        {label: '12:00', value: '12'},\n        {label: '13:00', value: '13'},\n        {label: '14:00', value: '14'},\n        {label: '15:00', value: '15'},\n        {label: '16:00', value: '16'},\n    ];\n\n    const username = useSelector(getUsername);\n    const dispatch = useDispatch();\n\n    function availableHours() {\n        return hourSelectItems\n            .filter(\n                (hour) => !allBookings\n                    .filter((book) => book.date === booking.date)\n                    .map((booking) => booking.hour)\n                    .includes(hour.value)\n            );\n    }\n\n    const confirm = (event) => {\n        confirmPopup({\n            target: event.currentTarget,\n            message: `Vill du boka datum ${booking.date} vid klockan ${booking.hour} ?`,\n            type: \"submit\",\n            acceptLabel: \"Ja\",\n            rejectLabel: \"Nej\",\n            accept: () => handleBooking(),\n            reject: () => null,\n        });\n    }\n\n\n    function handleBooking() {\n        dispatch(addNewBooking({...booking, username, id:createUUid()}));\n        dispatch(push(\"/\"));\n    }\n\n    function createUUid(){\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n\n    return (\n        <div className=\"bookingBody\">\n            <h3 className=\"bookingH3\">Boka tid</h3>\n            <Calendar\n                locale=\"sv\"\n                dateFormat=\"dd-mm-yy\"\n                inline\n                value={booking.date}\n                disabledDays={[6, 0]}\n                onChange={(e) => {\n                    setBooking({\n                        ...booking,\n                        date: e.value.toLocaleDateString(\"sv\")\n                    })\n                }}\n            />\n            <br />\n            <Dropdown\n                className=\"bookingDropdown\"\n                value={booking.hour}\n                options={availableHours()}\n                onChange={(e) => setBooking({...booking, hour: e.target.value})}\n                placeholder=\"VÃ¤lj tidpunkt\"\n                disabled={booking.date === undefined}\n            />\n            <br />\n            <Button onClick={confirm} label=\"Boka\" disabled={booking.date === undefined && booking.hour === undefined}/>\n        </div>\n    );\n}\n\nexport default Booking;"]},"metadata":{},"sourceType":"module"}