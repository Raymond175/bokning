{"ast":null,"code":"var _jsxFileName = \"/Users/raymondjones/Git/styledrekond/src/components/Booking.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Calendar } from \"primereact/calendar\";\nimport { Dropdown } from 'primereact/dropdown';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addNewBooking, getBookings } from \"../ducks/bookings\";\nimport { getUsername } from \"../ducks/session\";\nimport { Button } from \"primereact/button\";\nimport { push } from \"connected-react-router\";\nimport { confirmPopup } from 'primereact/confirmpopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Booking() {\n  _s();\n\n  const [booking, setBooking] = useState({\n    date: undefined,\n    hour: undefined\n  });\n  const allBookings = useSelector(getBookings);\n  const hourSelectItems = [{\n    label: '9:00',\n    value: '09'\n  }, {\n    label: '10:00',\n    value: '10'\n  }, {\n    label: '11:00',\n    value: '11'\n  }, {\n    label: '12:00',\n    value: '12'\n  }, {\n    label: '13:00',\n    value: '13'\n  }, {\n    label: '14:00',\n    value: '14'\n  }, {\n    label: '15:00',\n    value: '15'\n  }, {\n    label: '16:00',\n    value: '16'\n  }];\n  const username = useSelector(getUsername);\n  const dispatch = useDispatch();\n\n  function availableHours() {\n    return hourSelectItems.filter(hour => !allBookings.filter(book => book.date === booking.date).map(booking => booking.hour).includes(hour.value));\n  }\n\n  const confirm = event => {\n    confirmPopup({\n      target: event.currentTarget,\n      message: `Vill du boka datum ${booking.date} vid klockan ${booking.hour} ?`,\n      type: \"submit\",\n      acceptLabel: \"Ja\",\n      rejectLabel: \"Nej\",\n      accept: () => handleBooking(),\n      reject: () => null\n    });\n  };\n\n  function handleBooking() {\n    dispatch(addNewBooking({ ...booking,\n      username,\n      id: createUUid()\n    }));\n    dispatch(push(\"/\"));\n  }\n\n  function createUUid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0,\n            v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bookingBody\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"bookingH3\",\n      children: \"Boka tid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n      locale: \"sv\",\n      dateFormat: \"dd-mm-yy\",\n      inline: true,\n      value: booking.date,\n      disabledDays: [6, 0],\n      onChange: e => {\n        setBooking({ ...booking,\n          date: e.value.toLocaleDateString(\"sv\")\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n      className: \"bookingDropdown\",\n      value: booking.hour,\n      options: availableHours(),\n      onChange: e => setBooking({ ...booking,\n        hour: e.target.value\n      }),\n      placeholder: \"V\\xE4lj tidpunkt\",\n      disabled: booking.date === undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: confirm,\n      label: \"Boka\",\n      disabled: booking.date === undefined && booking.hour === undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Booking, \"c2Dqsyf8R/Mt+fJWBdgAtg+vO4k=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = Booking;\nexport default Booking;\n\nvar _c;\n\n$RefreshReg$(_c, \"Booking\");","map":{"version":3,"sources":["/Users/raymondjones/Git/styledrekond/src/components/Booking.js"],"names":["React","useState","Calendar","Dropdown","useDispatch","useSelector","addNewBooking","getBookings","getUsername","Button","push","confirmPopup","Booking","booking","setBooking","date","undefined","hour","allBookings","hourSelectItems","label","value","username","dispatch","availableHours","filter","book","map","includes","confirm","event","target","currentTarget","message","type","acceptLabel","rejectLabel","accept","handleBooking","reject","id","createUUid","replace","c","r","Math","random","v","toString","e","toLocaleDateString"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {Calendar} from \"primereact/calendar\";\nimport { Dropdown } from 'primereact/dropdown';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {addNewBooking, getBookings} from \"../ducks/bookings\";\nimport {getUsername} from \"../ducks/session\";\nimport {Button} from \"primereact/button\";\nimport {push} from \"connected-react-router\";\nimport {confirmPopup} from 'primereact/confirmpopup';\n\n\n\n\nfunction Booking() {\n    const [booking, setBooking] = useState({date:undefined, hour: undefined});\n    const allBookings = useSelector(getBookings);\n    const hourSelectItems = [\n        {label: '9:00', value: '09'},\n        {label: '10:00', value: '10'},\n        {label: '11:00', value: '11'},\n        {label: '12:00', value: '12'},\n        {label: '13:00', value: '13'},\n        {label: '14:00', value: '14'},\n        {label: '15:00', value: '15'},\n        {label: '16:00', value: '16'},\n    ];\n\n    const username = useSelector(getUsername);\n    const dispatch = useDispatch();\n\n    function availableHours() {\n        return hourSelectItems\n            .filter(\n                (hour) => !allBookings\n                    .filter((book) => book.date === booking.date)\n                    .map((booking) => booking.hour)\n                    .includes(hour.value)\n            );\n    }\n\n    const confirm = (event) => {\n        confirmPopup({\n            target: event.currentTarget,\n            message: `Vill du boka datum ${booking.date} vid klockan ${booking.hour} ?`,\n            type: \"submit\",\n            acceptLabel: \"Ja\",\n            rejectLabel: \"Nej\",\n            accept: () => handleBooking(),\n            reject: () => null,\n        });\n    }\n\n\n    function handleBooking() {\n        dispatch(addNewBooking({...booking, username, id:createUUid()}));\n        dispatch(push(\"/\"));\n    }\n\n    function createUUid(){\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n\n    return (\n        <div className=\"bookingBody\">\n            <h3 className=\"bookingH3\">Boka tid</h3>\n            <Calendar\n                locale=\"sv\"\n                dateFormat=\"dd-mm-yy\"\n                inline\n                value={booking.date}\n                disabledDays={[6, 0]}\n                onChange={(e) => {\n                    setBooking({\n                        ...booking,\n                        date: e.value.toLocaleDateString(\"sv\")\n                    })\n                }}\n            />\n            <br />\n            <Dropdown\n                className=\"bookingDropdown\"\n                value={booking.hour}\n                options={availableHours()}\n                onChange={(e) => setBooking({...booking, hour: e.target.value})}\n                placeholder=\"Välj tidpunkt\"\n                disabled={booking.date === undefined}\n            />\n            <br />\n            <Button onClick={confirm} label=\"Boka\" disabled={booking.date === undefined && booking.hour === undefined}/>\n        </div>\n    );\n}\n\nexport default Booking;"]},"metadata":{},"sourceType":"module"}